<!DOCTYPE html>
<html>
    <head>
        
    </head>
<body>
    <input id="newTodo" type="text">
    <div id="todoList" data-observer="observable: #newTodo; events: keydown; hendler: addNewTodo;">
        <div data-template="todoItemTemplate" class="todo-item" style="display: none;">
            <span>[[value]]</span>
        </div>
    </div>
    <script type="text/javascript" charset="UTF-8" src="app.js"></script>
    <script type="text/javascript" charset="UTF-8">
        function addNewTodo(sender, event) {
            if((event.type === "keydown") && (event.keyCode === 13)){
                console.log("Add new todo...");
                var newTodoItem= document.querySelector("[data-template='todoItemTemplate']").cloneNode(true);
                var newTodoText = sender.value;
                newTodoItem.textContent = newTodoItem.textContent.replace("[[value]]",newTodoText);
                var todoList = document.querySelector("#todoList");
                todoList.appendChild(newTodoItem);
                newTodoItem.style.display = "block";
            }            
        }
        (function(){
            var dataSet = {};
            var elementWithId = document.querySelectorAll("[id]");
            for(var i in elementWithId){
                dataSet[elementWithId[i].id] = elementWithId[i].dataset;
            }
            console.log(dataSet);
        })();
    </script>
</body>
</html>